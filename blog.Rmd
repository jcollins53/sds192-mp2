---
title: "Mini-Project 2"
author: "Morgan McLain-Smith and Julia Collins"
date: "March 26 2017"
output: html_document
---


# PAC Spending and Election Outcomes in the Post-Citizens United Era


In 2009 the case, Citizens United v. Federal Election Commission the U.S. Supreme Court.  ruled a 5-4 decision authored by chief Justice John Roberts that regulations limiting the ability of corporations and organizations to spend money to promote political agendas constituted an infringement of the first amendment. The decision had the effect of striking down major sections of existing campaign finance law and resulted in the deregulation campaign spending by outside organizations. This decision contributed to the explosion of outside spending by Political Action Committees (PACs) hoping to influence public policy through electioneering.  Some question still remains, however, about the actual impact of outside spending on election results. In our analysis we looked at the relationship between outside spending by PACs and vote-share captured by candidates in house elections in 2011-2012, the first election cycle after Citizens United ruling. Since in the United States incumbents have high rates of reelection we decided to track incumbents and non-incumbents in order to better isolate the relationship between outside spending and electoral success, by examining data for both primary and general election data. 


##Analysis

```{r, include=FALSE}
## Loading the data

load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")

library(tidyverse)
options(scipen = 999)
```

### Data Pipeline
```{r}

# Creates long data table with all the districts and their total number of general and primary votes.
votesPerRegion <- house_elections %>%
  group_by(state, district) %>%
  summarise(general_votes = sum(general_votes) , primary_votes = sum(primary_votes) ) %>%
  gather(key = electionType, value = totalVotes, general_votes, primary_votes)

# Creates data table of candidate ids and the total amounts for (24E), against (24A), and net (24E-24A)
netContributionsByCandidate <- contributions %>%
  filter( transaction_type == "24E" | transaction_type == "24A") %>%
  mutate(transaction_type = ifelse(transaction_type == "24A", "against", "pro"))%>% #24_ not valid col name
  rename(fec_id = cand_id) %>% #Switch cand -> fec for join with house_elections
  group_by(fec_id, transaction_type) %>% 
  summarise(sumContributions = sum(transaction_amt)) %>% 
  spread(transaction_type, sumContributions, fill = 0) %>% #makes data wide so we can calculate net, 1 row per candidate. 
  mutate(netContribution = pro - against)
  
#Creates data table of candidates, their net contributions, and their amount of votes.
contributionsByRegionByCandidate <- house_elections %>%
  gather(key = electionType, value = votes, general_votes, primary_votes)%>%  #Make long for join with votesPerRegion
  left_join(votesPerRegion, by = c("state", "district", "electionType"))%>%
  left_join(netContributionsByCandidate, by="fec_id") %>%
  mutate(percentVotes = votes/totalVotes, incumbent = factor(incumbent), ge_winner = factor(ge_winner), netContribution = ifelse(!is.na(netContribution), netContribution, 0))

electionPlot <- ggplot(contributionsByRegionByCandidate, aes(x = netContribution, y = percentVotes, col=incumbent, fill = incumbent)) + 
  facet_wrap(~electionType)  
```

###Point Graph
```{r message = FALSE}
electionPlot + geom_point( alpha =.5, na.rm = TRUE) 

```

###Smoothed Graph
```{r message = FALSE}
electionPlot + geom_smooth( alpha =.5, na.rm = TRUE) 
```

###Function calculating average net contribution
```{r}

#Function takes filter expression as a string, returns mean netContribution for all candidates who fit that filter.
meanContribution <- function(filterExp = TRUE) {
  contributionsByRegionByCandidate %>%
    filter(eval(parse(text = filterExp), envir = contributionsByRegionByCandidate)) %>% #turns string into expression
    summarise(meanCont = mean(netContribution))
}


```

Net contribution for incumbents:
```{r}
meanContribution("incumbent == TRUE")

```

Net contribution for non-incumbents:
```{r}
meanContribution("incumbent == FALSE")

```

Net contribution for general election winners:
```{r}
meanContribution("ge_winner == 'W'")
```

Net contribution for general election loosers:
```{r}
meanContribution("ge_winner == 'N'")
```

Our analysis found that the net spending (calculated as outside spending in favor of a candidate minus outside spending against a candidate) clustered heavily around 0, indicating that in the majority of house elections there was either little outside spending, or that contributions to pacs supporting a particular candidate and against that candidate were roughly balanced. Although the majority of races had net contributions near zero, the average net contribution was negative with a mean contribution of  -$247,633 for incumbents, and mean net contribution of -$54,188 for non incumbents. 

In both primaries and general elections incumbents consistently captured a higher percentage of the vote than non-incumbents at every level of contributions. In general elections when separating out incumbency status there there appears to be no relationship between net contribution and election outcomes when net contributions are below 0 (indicating higher levels of spending against a candidate than for that candidate), and a slight positive relationship between levels of positive net contributions and electoral outcomes. In primary elections there appears to be more variation in vote-share capture for both incumbents and non-incumbents at all levels of spending, and a slightly positive relationship between net contributions and vote share for both non-incumbents, and surprisingly a slight negative relationship between net contributions and vote share for incumbents, although these results may not be statistically significant. This weak to nonexistent relationship between net contributions and vote share across election types and incumbency status indicates that effect of net contributions by Political Action Committees is not a reliable indicator of election results. 
 



